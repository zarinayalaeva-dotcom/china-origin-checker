<!DOCTYPE html>
<html lang="ru">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üá®üá≥ Does this originate in China? | Live Internet Search</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pacifico', cursive;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(to right, #FFFF00, #000080);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .search-section {
            padding: 40px;
            border-bottom: 1px solid #eee;
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        #queryInput {
            flex: 1;
            padding: 15px 20px;
            font-size: 18px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            outline: none;
        }

        #queryInput:focus {
            border-color: #000080;
        }

        #checkButton {
            background: #000080;
            color: white;
            border: none;
            padding: 0 30px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        #checkButton:hover {
            background: #d32f2f;
            transform: translateY(-2px);
        }

        #checkButton:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .examples {
            margin-top: 30px;
        }

        .examples h3 {
            margin-bottom: 15px;
            color: #555;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 10px;
        }

        .example-chip {
            background: #e3f2fd;
            padding: 12px 15px;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
            font-weight: 500;
            transition: all 0.3s;
        }

        .example-chip:hover {
            background: #bbdefb;
            transform: translateY(-2px);
        }

        .loading {
            text-align: center;
            padding: 60px 40px;
            display: none;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #f44336;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-steps {
            margin-top: 30px;
            text-align: left;
            max-width: 500px;
            margin: 30px auto 0;
        }

        .step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            color: #666;
        }

        .step-icon {
            width: 30px;
            height: 30px;
            background: #f0f0f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }

        .step.active .step-icon {
            background: #f44336;
            color: white;
        }

        .result-section {
            padding: 40px;
        }

        .result-card {
            background: white;
            border-radius: 15px;
            padding: 0;
            margin-top: 20px;
            display: none;
            border: 1px solid #e0e0e0;
            overflow: hidden;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-header {
            padding: 30px;
            text-align: center;
        }

        .verdict {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .verdict-icon {
            font-size: 60px;
            line-height: 1;
        }

        .verdict-text {
            font-size: 2em;
            font-weight: bold;
        }

        .verdict-yes { color: #4caf50; }
        .verdict-no { color: #f44336; }
        .verdict-maybe { color: #ff9800; }
        .verdict-unknown { color: #9e9e9e; }

        .confidence {
            padding: 20px 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #eee;
        }

        .confidence-bar {
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            margin: 15px 0;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 1.5s ease-in-out;
        }

        .sources {
            padding: 25px 30px;
        }

        .source-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #f44336;
        }

        .source-item a {
            color: #f44336;
            text-decoration: none;
            font-weight: 500;
        }

        .source-item a:hover {
            text-decoration: underline;
        }

        .keywords {
            padding: 20px 30px;
            background: #fff8e1;
            border-top: 1px solid #ffecb3;
        }

        .keywords span {
            display: inline-block;
            background: white;
            padding: 5px 12px;
            margin: 5px;
            border-radius: 15px;
            font-size: 0.9em;
            border: 1px solid #ddd;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            border-top: 1px solid #eee;
            font-size: 0.9em;
        }

        .error {
            padding: 30px;
            text-align: center;
            color: #f44336;
            display: none;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            #checkButton {
                padding: 15px;
                width: 100%;
            }
            
            .examples-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üá®üá≥ Does this originate in China?</h1>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ–º–æ—â—å—é Wikipedia</p>
        </div>

        <div class="search-section">
            <div class="search-box">
                <input 
                    type="text" 
                    id="queryInput" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –Ω–∞ –ª—é–±–æ–º —è–∑—ã–∫–µ..."
                    autocomplete="off"
                >
                <button id="checkButton">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ</button>
            </div>

            <div class="examples">
                <h3>–ü—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∞:</h3>
                <div class="examples-grid">
                    <div class="example-chip" data-word="noodle">üçú –õ–∞–ø—à–∞</div>
                    <div class="example-chip" data-word="kimchi">üá∞üá∑ –ö–∏–º—á–∏</div>
                    <div class="example-chip" data-word="paper">üìú –ë—É–º–∞–≥–∞</div>
                    <div class="example-chip" data-word="tea">üçµ –ß–∞–π</div>
                    <div class="example-chip" data-word="pasta">üáÆüáπ –ü–∞—Å—Ç–∞</div>
                    <div class="example-chip" data-word="samurai">üáØüáµ –°–∞–º—É—Ä–∞–π</div>
                    <div class="example-chip" data-word="gunpowder">üéÜ –ü–æ—Ä–æ—Ö</div>
                    <div class="example-chip" data-word="compass">üß≠ –ö–æ–º–ø–∞—Å</div>
                </div>
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>–ò—â—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ...</p>
            
            <div class="loading-steps">
                <div class="step active" id="step1">
                    <div class="step-icon">1</div>
                    <div>–ü–æ–∏—Å–∫ –≤ Wikipedia...</div>
                </div>
                <div class="step" id="step2">
                    <div class="step-icon">2</div>
                    <div>–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞...</div>
                </div>
                <div class="step" id="step3">
                    <div class="step-icon">3</div>
                    <div>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è...</div>
                </div>
            </div>
        </div>

        <div class="error" id="error">
            <h2>‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</h2>
            <p>–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.</p>
            <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.</p>
            <button onclick="location.reload()" style="
                background: #f44336;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                margin-top: 15px;
                cursor: pointer;
            ">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>

        <div class="result-section">
            <div class="result-card" id="resultCard">
                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å -->
            </div>
        </div>

        <div class="footer">
            <p>üåê –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ Wikipedia –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
            <p>‚ö° –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –ø–æ–∏—Å–∫–∞ –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</p>
            <p>¬© 2024 China Origin Checker | Live Internet Version</p>
        </div>
    </div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const queryInput = document.getElementById('queryInput');
        const checkButton = document.getElementById('checkButton');
        const loading = document.getElementById('loading');
        const resultCard = document.getElementById('resultCard');
        const errorDiv = document.getElementById('error');
        
        // –ö–∏—Ç–∞–π—Å–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞
        const CHINA_KEYWORDS = [
            'china', 'chinese', 'china\'s', 'imperial china', 'ancient china',
            'han dynasty', 'tang dynasty', 'ming dynasty', 'qing dynasty',
            'beijing', 'shanghai', 'guangzhou', 'shenzhen',
            'confucius', 'taoism', 'buddhism', 'silk road',
            'invented in china', 'originated in china', 'chinese invention',
            'first developed in china', 'traditional chinese'
        ];
        
        const CHINA_INDICATORS = {
            strong: ['invented in china', 'chinese invention', 'originated in china'],
            medium: ['china', 'chinese', 'han dynasty', 'tang dynasty'],
            weak: ['asian', 'east asia', 'oriental']
        };
        
        const NON_CHINA_INDICATORS = [
            'japan', 'japanese', 'korea', 'korean', 'india', 'indian',
            'italy', 'italian', 'france', 'french', 'germany', 'german',
            'united states', 'american', 'british', 'english', 'european',
            'ancient greece', 'roman', 'mesopotamia', 'egypt'
        ];

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤
        document.querySelectorAll('.example-chip').forEach(chip => {
            chip.addEventListener('click', () => {
                const word = chip.getAttribute('data-word');
                queryInput.value = word;
                checkOrigin();
            });
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è
        async function checkOrigin() {
            const query = queryInput.value.trim();
            if (!query) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏');
                return;
            }

            // –°–±—Ä–æ—Å –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            resultCard.style.display = 'none';
            errorDiv.style.display = 'none';
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
            loading.style.display = 'block';
            checkButton.disabled = true;
            checkButton.textContent = '–ò–¥–µ—Ç –ø–æ–∏—Å–∫...';
            
            // –û–±–Ω–æ–≤–∏—Ç—å —à–∞–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏
            updateLoadingStep(1);
            
            try {
                // –®–∞–≥ 1: –ü–æ–∏—Å–∫ –≤ Wikipedia
                updateLoadingStep(1);
                const wikiData = await searchWikipedia(query);
                
                if (!wikiData || !wikiData.content) {
                    throw new Error('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ Wikipedia');
                }
                
                // –®–∞–≥ 2: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞
                updateLoadingStep(2);
                const analysis = analyzeText(wikiData.content, wikiData.title);
                
                // –®–∞–≥ 3: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                updateLoadingStep(3);
                const result = determineResult(analysis, wikiData);
                
                // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                displayResult(result, wikiData);
                
            } catch (error) {
                console.error('Error:', error);
                showError('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ —Å–ª–æ–≤–æ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.');
            } finally {
                // –°–∫—Ä—ã—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
                loading.style.display = 'none';
                checkButton.disabled = false;
                checkButton.textContent = 'üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ';
                resetLoadingSteps();
            }
        }

        // –ü–æ–∏—Å–∫ –≤ Wikipedia API
        async function searchWikipedia(query) {
            try {
                // –ò—â–µ–º —Å—Ç–∞—Ç—å—é –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)
                const searchUrl = `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`;
                
                const response = await fetch(searchUrl, {
                    headers: {
                        'User-Agent': 'ChinaOriginChecker/1.0 (https://github.com/zarinayalaeva-dotcom/china-origin-checker)'
                    }
                });
                
                if (!response.ok) {
                    // –ü–æ–ø—Ä–æ–±—É–µ–º –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ MediaWiki API
                    return await searchWikipediaAlternative(query);
                }
                
                const data = await response.json();
                
                return {
                    title: data.title,
                    content: data.extract || '',
                    url: data.content_urls?.desktop?.page || `https://en.wikipedia.org/wiki/${encodeURIComponent(query)}`,
                    thumbnail: data.thumbnail?.source || '',
                    description: data.description || ''
                };
                
            } catch (error) {
                console.log('Trying alternative Wikipedia search...');
                return await searchWikipediaAlternative(query);
            }
        }

        // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –≤ Wikipedia
        async function searchWikipediaAlternative(query) {
            try {
                const searchUrl = `https://en.wikipedia.org/w/api.php?action=query&format=json&origin=*&prop=extracts|info&exintro=true&explaintext=true&inprop=url&titles=${encodeURIComponent(query)}`;
                
                const response = await fetch(searchUrl);
                const data = await response.json();
                
                const pages = data.query.pages;
                const pageId = Object.keys(pages)[0];
                const page = pages[pageId];
                
                if (pageId === '-1' || !page.extract) {
                    throw new Error('Page not found');
                }
                
                return {
                    title: page.title,
                    content: page.extract,
                    url: page.fullurl || `https://en.wikipedia.org/wiki/${encodeURIComponent(query)}`,
                    description: ''
                };
                
            } catch (error) {
                throw new Error('Wikipedia search failed');
            }
        }

        // –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
        function analyzeText(text, title) {
            const textLower = text.toLowerCase();
            const titleLower = title.toLowerCase();
            
            let chinaScore = 0;
            let nonChinaScore = 0;
            let foundKeywords = [];
            let foundNonChinaKeywords = [];
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–ª—å–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
            CHINA_INDICATORS.strong.forEach(keyword => {
                if (textLower.includes(keyword)) {
                    chinaScore += 10;
                    foundKeywords.push(keyword);
                }
            });
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–µ–¥–Ω–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
            CHINA_INDICATORS.medium.forEach(keyword => {
                const regex = new RegExp(`\\b${keyword}\\b`, 'gi');
                const matches = textLower.match(regex);
                if (matches) {
                    chinaScore += matches.length * 3;
                    if (!foundKeywords.includes(keyword)) {
                        foundKeywords.push(keyword);
                    }
                }
            });
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–∞–±—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
            CHINA_INDICATORS.weak.forEach(keyword => {
                if (textLower.includes(keyword)) {
                    chinaScore += 1;
                    if (!foundKeywords.includes(keyword)) {
                        foundKeywords.push(keyword);
                    }
                }
            });
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ-–∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
            NON_CHINA_INDICATORS.forEach(keyword => {
                const regex = new RegExp(`\\b${keyword}\\b`, 'gi');
                const matches = textLower.match(regex);
                if (matches) {
                    nonChinaScore += matches.length * 5;
                    foundNonChinaKeywords.push(keyword);
                }
            });
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
            if (titleLower.includes('china') || titleLower.includes('chinese')) {
                chinaScore += 20;
                foundKeywords.push('title contains china/chinese');
            }
            
            // –ü–æ–∏—Å–∫ —Ñ—Ä–∞–∑ –æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–∏
            const originPhrases = [
                /invented in china/i,
                /chinese invention/i,
                /originated in china/i,
                /first developed in china/i,
                /traditional chinese/i,
                /ancient chinese/i
            ];
            
            originPhrases.forEach(phrase => {
                if (phrase.test(text)) {
                    chinaScore += 15;
                    foundKeywords.push(phrase.toString());
                }
            });
            
            return {
                chinaScore,
                nonChinaScore,
                totalScore: chinaScore - nonChinaScore,
                foundKeywords: [...new Set(foundKeywords)].slice(0, 10),
                foundNonChinaKeywords: [...new Set(foundNonChinaKeywords)].slice(0, 10),
                textLength: text.length
            };
        }

        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞
        function determineResult(analysis, wikiData) {
            const { chinaScore, nonChinaScore, totalScore, foundKeywords } = analysis;
            
            let verdict, confidence, reason;
            
            // –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
            if (chinaScore > 30 && nonChinaScore < 10) {
                verdict = 'YES';
                confidence = Math.min(95, 50 + chinaScore);
                reason = '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –ö–∏—Ç–∞—è';
            } 
            else if (nonChinaScore > 20 && chinaScore < 15) {
                verdict = 'NO';
                confidence = Math.min(90, 50 + nonChinaScore);
                reason = '–£–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è';
            }
            else if (totalScore > 10) {
                verdict = 'PROBABLY';
                confidence = 60 + totalScore;
                reason = '–ï—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ';
            }
            else if (totalScore < -10) {
                verdict = 'PROBABLY_NOT';
                confidence = 60 - totalScore;
                reason = '–°–∫–æ—Ä–µ–µ –Ω–µ –∏–∑ –ö–∏—Ç–∞—è';
            }
            else {
                verdict = 'UNKNOWN';
                confidence = 50;
                reason = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è';
            }
            
            // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ 0-100%
            confidence = Math.max(0, Math.min(100, confidence));
            
            return {
                verdict,
                confidence,
                reason,
                analysis,
                color: getColorForVerdict(verdict),
                emoji: getEmojiForVerdict(verdict)
            };
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        function displayResult(result, wikiData) {
            const { verdict, confidence, reason, analysis, color, emoji } = result;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            let titleText;
            switch(verdict) {
                case 'YES':
                    titleText = '‚úÖ –î–ê, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑ –ö–∏—Ç–∞—è';
                    break;
                case 'NO':
                    titleText = '‚ùå –ù–ï–¢, –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑ –ö–∏—Ç–∞—è';
                    break;
                case 'PROBABLY':
                    titleText = '‚ö†Ô∏è –í–ï–†–û–Ø–¢–ù–û, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑ –ö–∏—Ç–∞—è';
                    break;
                case 'PROBABLY_NOT':
                    titleText = '‚ö†Ô∏è –í–ï–†–û–Ø–¢–ù–û –ù–ï–¢';
                    break;
                default:
                    titleText = '‚ùì –ù–ï–ò–ó–í–ï–°–¢–ù–û';
            }
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º HTML
            let html = `
                <div class="result-header" style="background: ${color}15;">
                    <div class="verdict">
                        <div class="verdict-icon">${emoji}</div>
                        <div class="verdict-text verdict-${verdict.toLowerCase()}">
                            ${titleText}
                        </div>
                    </div>
                    <div style="margin-top: 10px; color: #666; font-size: 1.1em;">
                        ${reason}
                    </div>
                </div>
                
                <div class="confidence">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–∞:</span>
                        <span style="font-weight: bold; color: ${color};">${Math.round(confidence)}%</span>
                    </div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: ${confidence}%; background: ${color};"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.9em; color: #666;">
                        <span>–ö–∏—Ç–∞–π—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: ${analysis.chinaScore} –±–∞–ª–ª–æ–≤</span>
                        <span>–î—Ä—É–≥–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: ${analysis.nonChinaScore} –±–∞–ª–ª–æ–≤</span>
                    </div>
                </div>
            `;
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
            if (analysis.foundKeywords.length > 0) {
                html += `
                    <div class="keywords">
                        <h4>üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫–∏—Ç–∞–π—Å–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</h4>
                        ${analysis.foundKeywords.map(keyword => 
                            `<span>${keyword}</span>`
                        ).join('')}
                    </div>
                `;
            }
            
            // –ò—Å—Ç–æ—á–Ω–∏–∫–∏
            html += `
                <div class="sources">
                    <h4>üìö –ò—Å—Ç–æ—á–Ω–∏–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:</h4>
                    <div class="source-item">
                        <div><strong>${wikiData.title}</strong></div>
                        <div style="margin-top: 10px; color: #666; font-size: 0.95em;">
                            ${wikiData.content.substring(0, 200)}...
                        </div>
                        <div style="margin-top: 10px;">
                            <a href="${wikiData.url}" target="_blank" rel="noopener">
                                üìñ –ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç—å—é –Ω–∞ Wikipedia ‚Üí
                            </a>
                        </div>
                    </div>
                </div>
            `;
            
            // –ö–Ω–æ–ø–∫–∞ –¥–ª—è –Ω–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
            html += `
                <div style="text-align: center; padding: 25px 30px; border-top: 1px solid #eee;">
                    <button onclick="checkOrigin()" style="
                        background: ${color};
                        color: white;
                        border: none;
                        padding: 12px 30px;
                        border-radius: 8px;
                        font-size: 16px;
                        font-weight: bold;
                        cursor: pointer;
                        transition: all 0.3s;
                    " onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">
                        üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–æ–µ —Å–ª–æ–≤–æ
                    </button>
                    <p style="margin-top: 15px; color: #666; font-size: 0.9em;">
                        –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏–∑ Wikipedia
                    </p>
                </div>
            `;
            
            resultCard.innerHTML = html;
            resultCard.style.display = 'block';
            resultCard.scrollIntoView({ behavior: 'smooth' });
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getColorForVerdict(verdict) {
            switch(verdict) {
                case 'YES': return '#4CAF50';
                case 'NO': return '#F44336';
                case 'PROBABLY': return '#FF9800';
                case 'PROBABLY_NOT': return '#FF9800';
                default: return '#808080';
            }
        }

        function getEmojiForVerdict(verdict) {
            switch(verdict) {
                case 'YES': return 'üá®üá≥';
                case 'NO': return 'üö´';
                case 'PROBABLY': return 'ü§î';
                case 'PROBABLY_NOT': return '‚ö†Ô∏è';
                default: return '‚ùì';
            }
        }

        function updateLoadingStep(step) {
            // –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —à–∞–≥–∏
            document.querySelectorAll('.step').forEach(s => {
                s.classList.remove('active');
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —à–∞–≥
            const stepElement = document.getElementById(`step${step}`);
            if (stepElement) {
                stepElement.classList.add('active');
            }
        }

        function resetLoadingSteps() {
            document.querySelectorAll('.step').forEach(s => {
                s.classList.remove('active');
            });
            document.getElementById('step1').classList.add('active');
        }

        function showError(message) {
            errorDiv.style.display = 'block';
            errorDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        queryInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkOrigin();
        });
        
        checkButton.addEventListener('click', checkOrigin);
        
        // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            queryInput.focus();
            
            // –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            setTimeout(() => {
                queryInput.value = 'noodle';
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–µ –±—É–¥–µ–º, —á—Ç–æ–±—ã –Ω–µ –≥—Ä—É–∑–∏—Ç—å Wikipedia
            }, 500);
        };
    </script>
</body>
</html>
